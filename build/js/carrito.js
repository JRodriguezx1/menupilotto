function iniciarcarrito(){abrir_cerrar_carrito(),btn_continuar(),procesar_pedido()}document.addEventListener("DOMContentLoaded",(function(){iniciarcarrito()}));let carritoglobal=[],posicion=0;function abrir_cerrar_carrito(){const e=document.querySelector(".img-carrito"),t=document.querySelector("#cerrar-carrito"),r=document.querySelector(".carrito-inferior"),o=document.querySelector("#carrito-compras");e.addEventListener("click",()=>o.classList.add("mostrarcarrito")),t.addEventListener("click",()=>o.classList.remove("mostrarcarrito")),document.querySelector("#abrir-carrito").addEventListener("click",()=>o.classList.add("mostrarcarrito")),r.addEventListener("click",()=>{document.querySelector("html").style.scrollBehavior="auto",window.scroll({top:0}),o.classList.add("mostrarcarrito"),document.querySelector("html").style.scrollBehavior="smooth"})}export function agregarproducto(e){if(e.target.classList.contains("aÃ±adir")){let t,r,o=e.target.parentElement.parentElement.parentElement.parentElement,n=e.target.parentElement.parentElement.querySelectorAll('.agregar input[type="radio"]:checked'),a=e.target.parentElement.parentElement.querySelectorAll('.agregar .adicionales input[type="checkbox"]:checked'),i=0;if(t=e.target.parentElement.parentElement.querySelectorAll(".grupo"),t.forEach(e=>{let t=e.querySelectorAll('input[type="checkbox"]:checked').length;e.dataset.max>0&&t>e.dataset.max&&(i=1,Swal.fire({customClass:{confirmButton:"sweetbtn",cancelButton:"sweetbtn"},position:"center",icon:"error",title:`No es posible pedir mas de ${e.dataset.max} adicionales en la Sub categoria: ${e.firstElementChild.textContent}`,showConfirmButton:!0,confirmButtonText:"Volver",confirmButtonColor:"#eb203f"}))}),i)return;r=e.target.parentElement.parentElement.querySelectorAll('.agregar .grupo input[type="checkbox"]:checked');const c={id:o.querySelector(".cantidad").dataset.producto,nombre:o.querySelector(".producto-texto h4").textContent,cantidad:parseInt(o.querySelector(".num").textContent),valor:o.querySelector(".btn-mas h3").textContent.replace("$ ",""),array_variaciones:[],totalproducto:function(){let e=this.array_variaciones.reduce((e,t)=>e+parseInt(t.valor_t),0);return(parseInt(this.valor)+e)*this.cantidad},posicion:posicion};posicion++,n&&n.forEach(e=>{var t=e.parentElement.parentElement.querySelector(".cantidad-ingred .num-ingred"),r=e.parentElement.parentElement.querySelector(".cantidad-ingred label");const o={id:e.value,nombre:e.previousElementSibling.textContent,catidad:t?t.textContent:"1",valor_t:r?r.textContent.replace("+ $",""):"0"};c.array_variaciones=[...c.array_variaciones,o],e.checked=!1}),r&&r.forEach(e=>{var t=e.parentElement.parentElement.querySelector(".valor-adicional .cantidad-ingred .num-ingred"),r=e.parentElement.parentElement.querySelector(".cantidad-ingred label");let o;t?(o=e.previousElementSibling.textContent,t=t.textContent,r=r.textContent.replace("+ $","")):(e.parentElement.classList.contains("select-adicional")&&(o=e.parentElement.previousElementSibling.textContent,t="1",r=e.previousElementSibling.textContent.replace("+ $","")),e.parentElement.classList.contains("cantidad-ingred")&&(o=e.parentElement.parentElement.firstElementChild.textContent,t=e.previousElementSibling.previousElementSibling.textContent,r="0"),e.parentElement.classList.contains("select-adicional")||e.parentElement.classList.contains("cantidad-ingred")||(o=e.previousElementSibling.textContent,t="1",r="0"));const n={id:e.value,nombre:o,catidad:t,valor_t:r};c.array_variaciones=[...c.array_variaciones,n],e.checked=!1}),a&&a.forEach(e=>{const t={id:e.value,nombre:e.parentElement.parentElement.firstElementChild.textContent,catidad:1,valor_t:e.dataset.valor};c.array_variaciones=[...c.array_variaciones,t],e.checked=!1}),o.lastElementChild.classList.remove("abrir_add"),carritoglobal=[...carritoglobal,c],Swal.fire({position:"center",icon:"success",title:c.nombre+" agregado",showConfirmButton:!1,timer:1500}),mostrar_productos_carrito(),o.querySelector(".num").textContent=1}}function mostrar_productos_carrito(){const e=document.querySelector("#lista-carrito tbody");let t=0;for(;e.firstChild;)e.removeChild(e.firstChild);carritoglobal.forEach(r=>{t+=r.totalproducto();const o=document.createElement("tr");o.classList.add("contenido-producto"),o.innerHTML=`\n        <td>${r.nombre}</td>\n        <td>${r.cantidad}</td>\n        <td>${r.totalproducto()}</td>\n        <td> <a href="#" class="borrar-producto" data-posicion=${r.posicion}> X </a> </td>\n        `,e.appendChild(o),e.addEventListener("click",eliminarproducto)}),document.querySelector(".valor-total").innerHTML=`Valor Total a Pagar: <span>$${t}</span>`}function eliminarproducto(e){if(e.target.classList.contains("borrar-producto")){let t=e.target.dataset.posicion,r=e.target.parentElement.parentElement;carritoglobal.forEach(e=>{e.posicion==t&&(e.cantidad--,e.totalproducto(),0===e.cantidad?(carritoglobal=carritoglobal.filter(e=>e.posicion!=t),r.remove()):(r.children[1].textContent=e.cantidad,r.children[2].textContent=e.totalproducto()))});let o=carritoglobal.reduce((e,t)=>e+t.totalproducto(),0);document.querySelector(".valor-total").innerHTML=`Valor Total a Pagar: <span>$${o}</span>`}}function btn_continuar(){document.querySelector("#continuar").addEventListener("click",()=>{carritoglobal.length&&(document.querySelector(".presencial-domicilio").classList.add("mostrar-presencial-domicilio"),document.querySelector("body").style="overflow: hidden")})}function procesar_pedido(){document.querySelector("#form-presencial").addEventListener("submit",formpresencial),document.querySelector("#form-domicilio").addEventListener("submit",formdomicilio),document.querySelector(".presencial-domicilio").addEventListener("click",e=>{e.target.classList.contains("enlace-atras")&&(document.querySelector(".presencial-domicilio").classList.remove("mostrar-presencial-domicilio"),document.querySelector("body").style="overflow: auto")})}function formpresencial(e){e.preventDefault();const t=e.target.querySelector("#nombre").value.trim(),r=e.target.querySelector("#movil").value,o=e.target.querySelector("#num_mesa").value,n=document.querySelector("#msj-presencial");null===o||""==o?(console.log("numero de mesa no valida"),document.querySelector("#alerta").textContent="numero de mesa no valida."):(document.querySelector("#alerta").textContent="",Swal.fire({customClass:{confirmButton:"sweetbtn",cancelButton:"sweetbtn"},title:"Se enviara el pedido. Desea confirmar?",icon:"question",showCancelButton:!0,cancelButtonText:"NO",confirmButtonText:"SI",confirmButtonColor:"#eb203f"}).then(e=>{e.isConfirmed&&(console.log("pedido enviado presencial"),console.log(carritoglobal),console.log(t+" "+r+" "+o+" "+n),window.location.reload())}))}function formdomicilio(e){e.preventDefault();const t=e.target.querySelector("#nombre").value.trim(),r=e.target.querySelector("#movil").value,o=e.target.querySelector("#ciudad").value.trim(),n=e.target.querySelector("#direccion").value.trim();document.querySelector("#msj-domicilio");let a="";(null===t||""==t||t.length<3)&&(a+="Nombre no valido. <br>"),(null===r||""==r||r.length<10||r.length>10)&&(a+="Telefono movil no valido. <br>"),(null===o||""==o||o.length<3)&&(a+="Texto de ciudad no valido. <br>"),(null===n||""==n||n.length<7)&&(a+="Direccion muy corta."),""!==a?document.querySelector("#alerta").innerHTML=a:(document.querySelector("#alerta").textContent="",Swal.fire({customClass:{confirmButton:"sweetbtn",cancelButton:"sweetbtn"},title:"Se enviara orden. Desea confirmar su pedido?",icon:"question",showCancelButton:!0,cancelButtonText:"NO",confirmButtonText:"SI",confirmButtonColor:"#eb203f"}).then(e=>{e.isConfirmed&&(console.log("pedido enviado a domicilio"),console.log(t+" "+r+" "+o+" "+n),console.log(carritoglobal),window.location.reload())}))}